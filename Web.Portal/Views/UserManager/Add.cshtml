@using WeebReader.Web.Localization.Utilities
@model UserModel

@{
    ViewData["Title"] = Labels.AddUser;
    var roles = new List<string> {Labels.None};

    roles.AddRange(typeof(RoleTranslator).GetFields().Select(info => RoleTranslator.FromRole(info.GetValue(null).ToString())));
}

@section Headers
{
    <script>
    $(() => {
        let messageContainer = $("form .message");
        
        $("#users").addClass("active");
        $(".dropdown").dropdown();
        
        $(".form").form({
        on: "blur",
        
        }).api({
        url: "@Url.Action("Add")",
        serializeForm: true,
        method: "POST",
        onSuccess: (response) => window.location.href = response.destination,
        onFailure: (response) => addError(messageContainer, response)
        });
    });
    </script>
}

<form class="ui form" novalidate>
    <div class="ui message error"></div>
    <div class="two fields">
        <div class="field">
            <label>@Labels.Username</label>
            <input type="text" name="username" placeholder="@Labels.Username" asp-for="Username"/>
        </div>
        <div class="field">
            <label>@Labels.Email</label>
            <input type="email" name="email" placeholder="@Labels.EmailAddress" asp-for="Email">
        </div>
    </div>
    <div class="two fields">
        <div class="field">
            <label>@Labels.Password</label>
            <input type="password" name="password" placeholder="@Labels.Password" asp-for="Password">
        </div>
        <div class="field">
            <label>@Labels.Role</label>
            <select class="ui search dropdown" name="role" asp-for="Role">
                @foreach (var role in roles)
                {
                    <option value="@role">@role</option>
                }
            </select>
        </div>
    </div>
    <div class="field" style="overflow: auto">
        <div class="ui right floated black submit button" style="overflow: hidden">@Labels.AddUser</div>
    </div>
</form>