@inject ParametersManager ParametersManager

@{
    var googleAnalyticsEnabled = await ParametersManager.GetValue<bool>(ParameterTypes.SiteGoogleAnalyticsEnabled);
    var googleAnalyticsTrackingCode = string.Empty;

    if (googleAnalyticsEnabled)
    {
        googleAnalyticsTrackingCode = await ParametersManager.GetValue<string>(ParameterTypes.SiteGoogleAnalyticsCode);
    }
}

@if (googleAnalyticsEnabled)
{
    <script>
    const googleAnalyticsTrackingCode = "@googleAnalyticsTrackingCode";
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=@googleAnalyticsTrackingCode"></script>
    <script src="~/libs/weebreader/google-analytics.js" asp-append-version="true"></script>
}