@inject ParametersManager ParametersManager

@{
    var trackingCode = await ParametersManager.GetValue<string>(Parameter.Types.SiteGoogleAnalyticsCode);
}

@if (await ParametersManager.GetValue<bool>(Parameter.Types.SiteGoogleAnalyticsEnabled))
{
    <script async src="https://www.googletagmanager.com/gtag/js?id=@trackingCode"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag("js", new Date());
        gtag("config", "@trackingCode");
    </script>
}