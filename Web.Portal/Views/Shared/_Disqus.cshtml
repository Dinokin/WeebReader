@inject ParametersManager ParametersManager

@{
    var disqusEnabled = await ParametersManager.GetValue<bool>(Parameter.Types.PageDisqusEnabled);
    var disqusShortname = await ParametersManager.GetValue<string>(Parameter.Types.PageDisqusShortname);
    var pageUrl = $"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.Path}{Context.Request.QueryString}";
}

@if (disqusEnabled)
{
    <div id="disqus_thread"></div>
    <script>
    var disqusPageUrl = "@($"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.Path}{Context.Request.QueryString}")";
    var disqusIdentifier = "@ViewData["DisqusIdentifier"]";
    var disqusTitle = "@ViewData["DisqusTitle"]";
    var disqusShortname = "@disqusShortname";
    </script>
    <script src="~/libs/weebreader.1.0.1/disqus.js"></script>
}